/*
 * SPDX-License-Identifier: Apache-2.0
 *
 * Devicetree overlay enabling the Moonlite focuser firmware on the
 * qemu_cortex_m0 board. The design uses the generic GPIO H-bridge stepper
 * controller so the application can run entirely in the simulator.
 */

/ {
	aliases {
		stepper = &focuser_stepper;
		stepper-drv = &focuser_stepper;
	};

	focuser_stepper: focuser_stepper {
		compatible = "zephyr,h-bridge-stepper";
		/* Four phase outputs feeding a simulated H-bridge. */
		gpios = <&gpio0 1 GPIO_ACTIVE_HIGH>,
			<&gpio0 2 GPIO_ACTIVE_HIGH>,
			<&gpio0 3 GPIO_ACTIVE_HIGH>,
			<&gpio0 4 GPIO_ACTIVE_HIGH>;
		en-gpios = <&gpio0 0 GPIO_ACTIVE_HIGH>;
		micro-step-res = <1>;
		status = "okay";
	};

	zephyr,user {
		uart_handler = <&uart0>;
	};
};

&uart0 {
	current-speed = <9600>;
};
