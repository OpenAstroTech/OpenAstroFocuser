# Copyright (c) 2025
# SPDX-License-Identifier: Apache-2.0

# Enable C++ support and the standard library used by the Moonlite protocol stack.
CONFIG_CPP=y
CONFIG_STD_CPP20=y
CONFIG_REQUIRES_FULL_LIBCPP=y
CONFIG_NEWLIB_LIBC=y
CONFIG_MOONLITE=y

# Provide heap storage for std::string and other dynamic allocations.
CONFIG_HEAP_MEM_POOL_SIZE=4096

# Route logs and console I/O over UART for the focuser serial protocol.
CONFIG_SERIAL=y
CONFIG_CONSOLE=y
CONFIG_STDOUT_CONSOLE=y
CONFIG_PRINTK=y
CONFIG_UART_CONSOLE=y
CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_APP_LOG_LEVEL_INF=y
CONFIG_LOG_BACKEND_UART=y

# Enable Zephyr's generic stepper controller subsystem and the GPIO step/dir backend.
CONFIG_STEPPER=y
CONFIG_GPIO_STEP_DIR_CONTROLLER=y
CONFIG_STEPPER_ADI_TMC2209=y

# Grow the main thread stack to accommodate the C++ runtime initialisation.
CONFIG_MAIN_STACK_SIZE=3072
